---
interface Props {
  currentPath: string;
  user?: { email?: string | null } | null;
}

const { currentPath, user } = Astro.props;

const links = [
  { href: "/dashboard", label: "Dashboard" },
  { href: "/generate", label: "Generuj" },
  { href: "/flashcards", label: "Kolekcja" },
  { href: "/study", label: "Nauka" },
  { href: "/account", label: "Konto" },
];
---

<header class="border-b bg-background">
  <div class="container mx-auto flex h-16 items-center justify-between px-4">
    <div class="flex items-center gap-6">
      <a href="/dashboard" class="text-lg font-semibold tracking-tight"> 10x Cards </a>
      <nav class="hidden md:flex items-center gap-4">
        {
          links.map((link) => {
            const isActive =
              currentPath === link.href || (link.href !== "/dashboard" && currentPath.startsWith(link.href));
            return (
              <a
                href={link.href}
                class:list={[
                  "text-sm font-medium transition-colors hover:text-primary",
                  isActive ? "text-primary" : "text-muted-foreground",
                ]}
                aria-current={isActive ? "page" : undefined}
              >
                {link.label}
              </a>
            );
          })
        }
      </nav>
    </div>

    <div class="flex items-center gap-3">
      {user ? (
        <>
          <span class="text-sm text-muted-foreground">{user.email ?? "Użytkownik"}</span>
          <form method="post" action="/api/auth/logout">
            <button
              type="submit"
              class="text-sm font-medium text-muted-foreground transition-colors hover:text-primary"
            >
              Wyloguj
            </button>
          </form>
        </>
      ) : (
        <a href="/auth/login" class="text-sm font-medium text-muted-foreground hover:text-primary">
          Zaloguj się
        </a>
      )}
    </div>
  </div>
</header>
